<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>Лабораторная работа №3</title>
    </head>
    <body>
		<h1 align = "center">Лабораторная работа по Дискретной математике №3<br><h2 align = "center">ИВТАСбд-11<br>Агафонов Владислав</h2></h1>
        <p>
           Введите матрицу отношения и узнайте является ли она функцией. <br>
           Пример ввода: <br>
           1 0 0 0 <br>
           0 0 0 1 <br>
        </p>
        <form onsubmit="matrix(); return false;">
		<script>
			function matrix() {
				let matrix = document.getElementById("input").value.split("\n");
				let width = matrix[0].split(" ").length;
				let valid = 0;

				for (let i = 0; i < matrix.length; i++) {
					let line = matrix[i].split(" ");

					for (let j = 0; j < line.length; j++) {
						if(!(line[j] == 0 || line[j] == 1)) {
							valid = 1;
						}
					}

					if(line.length != width) {
						valid = 2;
					}
				}

				if (valid == 0) {
					let res = true;
					for (let i = 0; i < matrix.length; i++) {
						let count = 0;
						let line = matrix[i].split(" ");
						for (let j = 0; j < width; j++) {
							if (line[j] == 1) {
								count++;
							}
						}

						if (count != 1) {
							res = false;
						}
						if (res) {
							document.getElementById("result").innerHTML = "Да, матрица является функцией.";
						}
						else {
							document.getElementById("result").innerHTML = "Нет, матрица не является функцией.";
						}
					}
					}
				else if (valid == 1) {
					alert("В матрице не может быть элементов, отличных от нуля или единицы!")
				}
				else {
					alert("Матрица не прямоугольная!")
				}
			}
		</script>
            <textarea name="comment" cols="30" rows="7" placeholder="Введите матрицу" id="input"></textarea><br>
            <input type="submit" name="submit-btn" value="Выполнить">
        </form>
        <p><span id="result"></span></p>
    </body>
</html>